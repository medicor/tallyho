<!doctype html>
<html>

<head>
	<title>TallyHo</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
	<meta name="theme-color" content="#303F9F">
	<meta name="application-name" content="TallyHo">
	<link rel="manifest" href="manifest.json">
	<script>
		(function(i, s, o, g, r, a, m) {
			i['GoogleAnalyticsObject'] = r;
			i[r] = i[r] || function() {
				(i[r].q = i[r].q || []).push(arguments);
			}, i[r].l = 1 * new Date();
			a = s.createElement(o),
				m = s.getElementsByTagName(o)[0];
			a.async = 1;
			a.src = g;
			m.parentNode.insertBefore(a, m);
		})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
		ga('create', 'UA-19223409-3', 'auto');
		ga('send', 'pageview');
	</script>
	<script src="bower_components/webcomponentsjs/webcomponents-lite.js"></script>
	<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
	<link rel="import" href="../bower_components/paper-drawer-panel/paper-drawer-panel.html">
	<link rel="import" href="../bower_components/paper-header-panel/paper-header-panel.html">
	<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
	<link rel="import" href="../bower_components/paper-item/paper-item.html">
	<link rel="import" href="../bower_components/paper-menu/paper-menu.html">
	<link rel="import" href="../bower_components/paper-toolbar/paper-toolbar.html">
	<link rel="import" href="../bower_components/firebase-element/firebase-collection.html">
	<link rel="import" href="../bower_components/firebase-element/firebase-auth.html">
	<link rel="import" href="../bower_components/neon-animation/animations/scale-up-animation.html">
	<link rel="import" href="../bower_components/neon-animation/animations/fade-out-animation.html">
	<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">
	<link rel="import" href="../bower_components/paper-datatable/paper-datatable.html">

	<style is="custom-style">
		:root {
			--default-primary-color: #00796b;
		}
		
		body {
			background: #fafafa;
			font-family: 'Roboto', 'Helvetica Neue', Helvetica, Arial, sans-serif;
			color: #333;
		}
		
		.list-panel {
			--paper-header-panel-standard-container: {
				border-right: 1px solid #ccc;
			}
		}
		
		.list paper-item {
			height: 80px;
			border-bottom: 1px solid #dedede;
		}
		
		.main-drawer-panel:not([narrow]) [list-toggle] {
			display: none;
		}
	</style>
</head>

<body unresolved class="fullbleed layout vertical">
	<template is="dom-bind" id="tallyho">
		<firebase-auth id="authenticator" user="{{user}}" location="https://tallyho.firebaseio.com" ref="{{refauth}}" provider="github"></firebase-auth>
		<paper-drawer-panel id="navDrawerPanel" responsive-width="1280px">
			<paper-header-panel class="list-panel" drawer>
				<paper-toolbar>
					<paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
				</paper-toolbar>
				<paper-menu class="list" on-iron-activate="_listTap">
					<firebase-collection location="https://tallyho.firebaseio.com/{{user.uid}}/customers" data="{{customers}}"></firebase-collection>
					<template is="dom-repeat" items="[[customers]]" as="customer">
						<paper-item>
							[[customer.__firebaseKey__]]
							<br> [[customer.contactName]]
						</paper-item>
					</template>
				</paper-menu>
			</paper-header-panel>
			<paper-header-panel class="content-panel" main>
				<paper-toolbar>
					<paper-icon-button icon="arrow-back" list-toggle></paper-icon-button>
				</paper-toolbar>
				<div class="content">
					<h1>TODO:s</h1>
					<ul>
						<li>Use <a href="https://github.com/David-Mulder/paper-datatable">paper-paper-datatable</a>/</li>
						<li>Use <a href="https://github.com/cheonhyangzhang/paper-typeahead-input">paper-typeahead-input</a>/</li>
						<li>Use <a href="http://www.gravatar.com/avatar/1?d=identicon">Gravatar's identicon</a>as project icons</li>
					</ul>
					<pre>User: {{dumpObject(user)}}</pre>
				</div>
			</paper-header-panel>
		</paper-drawer-panel>
		<paper-dialog modal opened="{{!user}}" entry-animation="scale-up-animation" exit-animation="fade-out-animation">
			<h2>Logga in</h2>
			<div>
				<button on-tap="signIn">Logga in</button>
			</div>
		</paper-dialog>
	</template>
	<script>
		(function(document) {
			var tallyho = document.querySelector('#tallyho');

			tallyho.signIn = function() {
				this.$.authenticator.login();
			};

			tallyho.signOut = function() {
				this.$.authenticator.logout();
				this.user = null;
			};

			tallyho.dumpObject = function(anObject) {
				return JSON.stringify(anObject, null, '\t');
			};

			tallyho._computeListWidth = function(isMobile) {
				// when in mobile screen size, make the list be 100% width to cover the whole screen
				return isMobile ? '100%' : '33%';
			};

			tallyho._listTap = function() {
				this.$.mainDrawerPanel.closeDrawer();
			}

		})(document);
	</script>
</body>

</html>
